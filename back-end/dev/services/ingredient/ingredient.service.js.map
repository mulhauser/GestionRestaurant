{"version":3,"file":"ingredient.service.js","sourceRoot":"","sources":["../../../src/services/ingredient/ingredient.service.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,yCAA4C;AAE5C,yCAAsC;AAGtC,2CAAwC;AACxC,iDAA+C;AAC/C,8CAA0D;AAE1D,gEAAiE;AAGjE,IAAa,iBAAiB,GAA9B;IACI;;OAEG;IACH,YAAoB,0BAAqD;QAArD,+BAA0B,GAA1B,0BAA0B,CAA2B;IAAG,CAAC;IAE7E;;;;OAIG;IACH,OAAO;QACH,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,IAAI,EAAE,CAAC;IAClD,CAAC;IAED;;;;;;OAMG;IACH,GAAG,CAAC,EAAU;QACV,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,QAAQ,CAAC,EAAE,CAAC;aAC9C,IAAI,CACD,sBAAU,CAAC,CAAC,CAAC,EAAE,CAAC,cAAM,CAAC,WAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAC3D,mBAAO,CAAC,CAAC,CAAC,EAAE,CACR,CAAC,CAAC,CAAC,CAAC,CAAC;YACD,OAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACP,cAAM,CAAC,WAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE,aAAa,CAAC,CAAC,CACpE,CACJ,CAAC;IACV,CAAC;IAED;;;;;;OAMG;IACH,MAAM,CAAC,UAAsB;QACzB,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,MAAM,CAAC,UAAU,CAAC;aACpD,IAAI,CACD,sBAAU,CAAC,CAAC,CAAC,EAAE,CAAC,cAAM,CAAC,WAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EACjD,eAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC,CAC/C,CAAC;IACV,CAAC;IAED;;;;;;;OAOG;IACH,MAAM,CAAC,EAAU,EAAE,UAAsB;QACrC,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,EAAE,EAAE,UAAU,CAAC;aACnE,IAAI,CACD,sBAAU,CAAC,CAAC,CAAC,EAAE,CAAC,cAAM,CAAC,WAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAC3D,mBAAO,CAAC,CAAC,CAAC,EAAE,CACR,CAAC,CAAC,CAAC,CAAC,CAAC;YACD,OAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACP,cAAM,CAAC,WAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE,aAAa,CAAC,CAAC,CACpE,CACJ,CAAC;IACV,CAAC;IAED;;;;;;OAMG;IACH,MAAM,CAAC,EAAU;QACb,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,EAAE,CAAC;aACvD,IAAI,CACD,sBAAU,CAAC,CAAC,CAAC,EAAE,CAAC,cAAM,CAAC,WAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAC3D,mBAAO,CAAC,CAAC,CAAC,EAAE,CACR,CAAC,CAAC,CAAC,CAAC,CAAC;YACD,OAAE,CAAC,SAAS,CAAC,CAAC,CAAC;YACf,cAAM,CAAC,WAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE,aAAa,CAAC,CAAC,CACpE,CACJ,CAAC;IACV,CAAC;CACJ,CAAA;AAvFY,iBAAiB;IAD7B,iBAAU,EAAE;qCAKuC,+CAAyB;GAJhE,iBAAiB,CAuF7B;AAvFY,8CAAiB","sourcesContent":["import { Injectable } from '@hapiness/core';\nimport { HapinessHTTPHandlerResponse } from '@hapiness/core/extensions/http-server';\nimport { Biim } from '@hapiness/biim';\nimport { Observable } from 'rxjs/Observable';\n\nimport { of } from 'rxjs/observable/of';\nimport { _throw } from 'rxjs/observable/throw';\nimport { flatMap, map, catchError } from 'rxjs/operators';\nimport {Ingredient} from '../../interfaces/ingredient';\nimport {IngredientDocumentService} from '../ingredient-document';\n\n@Injectable()\nexport class IngredientService {\n    /**\n     * Class constructor\n     */\n    constructor(private _ingredientDocumentService: IngredientDocumentService) {}\n\n    /**\n     * Returns all existing people in the list\n     *\n     * @returns {Observable<People[]>}\n     */\n    listAll(): Observable<Ingredient[] | void> {\n        return this._ingredientDocumentService.find();\n    }\n\n    /**\n     * Returns one people of the list matching id in parameter\n     *\n     * @param {string} id of the people\n     *\n     * @returns {Observable<People>}\n     */\n    one(id: string): Observable<Ingredient> {\n        return this._ingredientDocumentService.findById(id)\n            .pipe(\n                catchError(e => _throw(Biim.preconditionFailed(e.message))),\n                flatMap(_ =>\n                    !!_ ?\n                        of(_) :\n                        _throw(Biim.notFound(`Ingredient with id '${id}' not found`))\n                )\n            );\n    }\n\n    /**\n     * Check if person already exists and add it in people list\n     *\n     * @param person to create\n     *\n     * @returns {Observable<HapinessHTTPHandlerResponse>}\n     */\n    create(ingredient: Ingredient): Observable<HapinessHTTPHandlerResponse> {\n        return this._ingredientDocumentService.create(ingredient)\n            .pipe(\n                catchError(e => _throw(Biim.conflict(e.message))),\n                map(_ => ({ response: _, statusCode: 201 }))\n            );\n    }\n\n    /**\n     * Update a person in people list\n     *\n     * @param {string} id of the person to update\n     * @param person data to update\n     *\n     * @returns {Observable<People>}\n     */\n    update(id: string, ingredient: Ingredient): Observable<Ingredient> {\n        return this._ingredientDocumentService.findByIdAndUpdate(id, ingredient)\n            .pipe(\n                catchError(e => _throw(Biim.preconditionFailed(e.message))),\n                flatMap(_ =>\n                    !!_ ?\n                        of(_) :\n                        _throw(Biim.notFound(`Ingredient with id '${id}' not found`))\n                )\n            );\n    }\n\n    /**\n     * Deletes on person in people list\n     *\n     * @param {string} id of the person to delete\n     *\n     * @returns {Observable<any>}\n     */\n    delete(id: string): Observable<void> {\n        return this._ingredientDocumentService.findByIdAndRemove(id)\n            .pipe(\n                catchError(e => _throw(Biim.preconditionFailed(e.message))),\n                flatMap(_ =>\n                    !!_ ?\n                        of(undefined) :\n                        _throw(Biim.notFound(`Ingredient with id '${id}' not found`))\n                )\n            );\n    }\n}\n"]}