{"version":3,"file":"biim.module.js","sourceRoot":"","sources":["../../src/biim.module.ts"],"names":[],"mappings":";;;;;;;;AAAA,yCAAgG;AAChG,yBAA0B;AAK1B,IAAM,2BAA2B,GAAjC;IAEI,OAAO,CAAC,OAAgB,EAAE,KAAwB;QAC9C,0BAA0B;QAC1B,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACrE,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;YACvC,MAAM,GAAG,GAAG,OAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACjE,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACvE,CAAC;QACD,KAAK,CAAC,QAAQ,EAAE,CAAC;IACrB,CAAC;CAEJ,CAAA;AAZK,2BAA2B;IAHhC,gBAAS,CAAC;QACP,KAAK,EAAE,eAAe;KACzB,CAAC;GACI,2BAA2B,CAYhC;AAMD,IAAa,UAAU,GAAvB;CAA0B,CAAA;AAAb,UAAU;IAJtB,qBAAc,CAAC;QACZ,OAAO,EAAE,OAAO;QAChB,YAAY,EAAE,CAAE,2BAA2B,CAAE;KAChD,CAAC;GACW,UAAU,CAAG;AAAb,gCAAU","sourcesContent":["import { HapinessModule, Lifecycle, OnEvent, Request, ReplyWithContinue } from '@hapiness/core';\nimport { Biim } from './';\n\n@Lifecycle({\n    event: 'onPreResponse'\n})\nclass ReformatBadRequestLifecycle implements OnEvent {\n\n    onEvent(request: Request, reply: ReplyWithContinue) {\n        /* istanbul ignore else */\n        if (request.response.isBoom && !request.response.output.payload['key']) {\n            const source = request.response.output;\n            const err = Biim.create(source.statusCode, source.payload.error);\n            request.response.output.payload['key'] = err.output.payload['key'];\n        }\n        reply.continue();\n    }\n\n}\n\n@HapinessModule({\n    version: '1.4.0',\n    declarations: [ ReformatBadRequestLifecycle ],\n})\nexport class BiimModule {}\n"]}